Репозиторий базового кода модуля расширения для системы DED BOX https://vk.com/ded_moto_sys

Для сборки модуля вам понядобятся 3 компонента

- ESP32 (Любая версия с WIFI напрмиер ESP32WROOM или ESP32S3) 
- Импульсная понижайка на 5 вольт напрмер можно взять DC-DC mini560 5В
- Конденсатор на 30/50 вольт 470 - 1000 микрофарат

Я намеренно не стал использовать многозадачность и при необходимости код будет не сложно адаптировать под ESP8266

**Нужные версии библиотек**

ArduinoJson - 5.13.5

ElegantOTA - 3.1.6

WebSockets_Generic - 2.16.1



**Доступные для работы параметры рассылаемые DED BOX через WebSocet:**

"micros" - Внутреннее время генерации данных

"select_cart" - Выбранная карта зажигания

"aa" - Корректировка по датчику ручки или заслонки

"qs" - Активирован или деактивирован квикшифтер

"modulator" - Индикатор присутствия сигнала на датчике

"max_rpm" - Начало системной отсечки

"max_rpm_angle_kiker" - Угол падения отсечки

"advance_angle" - Актуальный угол опережения зажигания

"rpm" - Обороты коленвала

"termo" - Показания датчика температуры (Пока неактивен появится с DED SENSE)

"throttle" - Показания датчика заслонки или ручки газа;

"init_angle" - Угол до метки

"filter_val" - Программный фильтр сигнала

"high" - Тип выходного сигнала

"init_flash_time" - Время активации выходного сигнала

"cpu_termo" - Температура процессора

"card" - Номер активной карты

"wsid" - Имя точки доступа DED BOX

"wpass" - Пароль точки доступа DED BOX

"INVERT_SENSOR" - Состояние инвертирования датчика коленвала

"INVERT_THROTTLE" - Состояние инвертирования датчика заслонки

"angles" - Точки активной карты



**Доступные API в ядре DED BOX штатный режим работы**

http://192.168.4.1/reinit - запустит процес отката к заводским настройкам

http://192.168.4.1/core/version - вернет версию ядра DED CORE

http://192.168.4.1/core/reboot - отправит DED BOX в перезагрузку

http://192.168.4.1/card?id=0 - активирует указанную в квери параметре id

http://192.168.4.1/update_card?id=0&rpm=0&quick_adv=0&angle=0&angle_adv=0 - установит настройку указанной точки

http://192.168.4.1/max?rpm=0&angle=0 - установки настройки отсечки

http://192.168.4.1/angle/advance?status=0 - установит статус обработчика корректировки по заслонке

http://192.168.4.1/angle?init=0 - установит угол метки на роторе

http://192.168.4.1/wifi/updator?ssid=XXX&appsk=1234567890 - смена названия и пароля точки доступа DED BOX

http://192.168.4.1/quickshifter?status=0 - установит статус обработчика активации квикшифтера

http://192.168.4.1/modulator?time=0 - установит вребя активного сигнала

http://192.168.4.1/modulator?filter=0 - установит уровеньфильтрациивходного сигнала

http://192.168.4.1/modulator?high=0 - установит тип выходного сигнала

http://192.168.4.1/sensor?invert=0 - установит инвертирован или нет выходной сигнал

http://192.168.4.1/throttle?invert=0 - установит инвертирован или нет сигнал с датчика заслонки



**Доступные API в ядре DED BOX режил RECOVERY**

http://192.168.4.1/reinit - запустит процес отката к заводским настройкам

http://192.168.4.1/core/version - вернет версию ядра DED CORE

http://192.168.4.1/core/reboot - отправит DED BOX в перезагрузку

http://192.168.4.1/wifi/ssid - покажет актуальное название точки доступа DED BOX

http://192.168.4.1/wifi/pass - покажет актуальный пароль от точки доступа DED BOX
